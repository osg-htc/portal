
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://osg-htc.org/managing_htc_workloads_on_osg_connect/using_software_on_the_osg/example-compilation/">
      
      <link rel="icon" href="../../../assets/OSG_Logo.svg">
      <meta name="generator" content="mkdocs-1.3.0, mkdocs-material-8.2.8">
    
    
      
        <title>Example Software Compilation - OSG Connect Docs</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.644de097.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.e6a45f82.min.css">
        
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../stylesheets/code-highlight.css">
    
      <link rel="stylesheet" href="../../../stylesheets/osg.css">
    
    <script>__md_scope=new URL("../../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#example-software-compilation" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="OSG Connect Docs" class="md-header__button md-logo" aria-label="OSG Connect Docs" data-md-component="logo">
      
  <img src="../../../assets/OSG_Logo.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            OSG Connect Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Example Software Compilation
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../../.." class="md-tabs__link">
      Home
    </a>
  </li>

      
        
  
  


  
  
  
    

  
  
  
    <li class="md-tabs__item">
      <a href="../../../overview/welcome_and_account_setup/is-it-for-you/" class="md-tabs__link">
        Overview
      </a>
    </li>
  

  

      
        
  
  


  
  
  
    

  
  
  
    <li class="md-tabs__item">
      <a href="../../../support_and_training_resources/get_help%21/getting-help-from-RCFs/" class="md-tabs__link">
        Support And Training Resources
      </a>
    </li>
  

  

      
        
  
  
    
  


  
  
  
    

  
  
  
    <li class="md-tabs__item">
      <a href="../../htc_workload_planning_testing_scaling_up/roadmap/" class="md-tabs__link md-tabs__link--active">
        Managing HTC Workloads On OSG Connect
      </a>
    </li>
  

  

      
        
  
  


  
  
  
    

  
  
  
    <li class="md-tabs__item">
      <a href="../../../software_examples_for_osg/python/manage-python-packages/" class="md-tabs__link">
        Software Examples For OSG
      </a>
    </li>
  

  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="OSG Connect Docs" class="md-nav__button md-logo" aria-label="OSG Connect Docs" data-md-component="logo">
      
  <img src="../../../assets/OSG_Logo.svg" alt="logo">

    </a>
    OSG Connect Docs
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Overview
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Overview" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Overview
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_1" type="checkbox" id="__nav_2_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_1">
          Welcome And Account Setup
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Welcome And Account Setup" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_1">
          <span class="md-nav__icon md-icon"></span>
          Welcome And Account Setup
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../overview/welcome_and_account_setup/is-it-for-you/" class="md-nav__link">
        Computation on the Open Science Pool 
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../overview/welcome_and_account_setup/registration-and-login/" class="md-nav__link">
        Registration and Login for OSG Connect 
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../overview/welcome_and_account_setup/generate-add-sshkey/" class="md-nav__link">
        Generate SSH Keys and Activate Your OSG Login 
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../overview/welcome_and_account_setup/starting-project/" class="md-nav__link">
        Join and Use a Project in OSG Connect 
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_2" type="checkbox" id="__nav_2_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_2">
          References
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="References" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_2">
          <span class="md-nav__icon md-icon"></span>
          References
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../overview/references/policy/" class="md-nav__link">
        Policies for Using OSG Connect and the OSPool 
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../overview/references/frequently-asked-questions-faq-/" class="md-nav__link">
        Frequently Asked Questions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../overview/references/acknowledgeOSG/" class="md-nav__link">
        Acknowledge the OSG
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../overview/references/contact-information/" class="md-nav__link">
        Contact OSG for non-Support Inquiries
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../overview/references/gracc/" class="md-nav__link">
        OSG Accounting (GRACC)
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Support And Training Resources
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Support And Training Resources" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Support And Training Resources
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_1" type="checkbox" id="__nav_3_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_1">
          Get Help!
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Get Help!" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_1">
          <span class="md-nav__icon md-icon"></span>
          Get Help!
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../support_and_training_resources/get_help%21/getting-help-from-RCFs/" class="md-nav__link">
        Email, Office Hours, and 1-1 Meetings 
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_2" type="checkbox" id="__nav_3_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_2">
          Education And Training
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Education And Training" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_2">
          <span class="md-nav__icon md-icon"></span>
          Education And Training
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../support_and_training_resources/education_and_training/osgusertraining/" class="md-nav__link">
        Bi-Monthly OSG User Training (registration+materials)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../support_and_training_resources/education_and_training/osg-user-school/" class="md-nav__link">
        Annual, Week-Long OSG User School 
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../support_and_training_resources/education_and_training/previous-training-events/" class="md-nav__link">
        Other Past Training Events 
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Managing HTC Workloads On OSG Connect
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Managing HTC Workloads On OSG Connect" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Managing HTC Workloads On OSG Connect
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_1" type="checkbox" id="__nav_4_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4_1">
          HTC Workload Planning Testing Scaling Up
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="HTC Workload Planning Testing Scaling Up" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_1">
          <span class="md-nav__icon md-icon"></span>
          HTC Workload Planning Testing Scaling Up
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../htc_workload_planning_testing_scaling_up/roadmap/" class="md-nav__link">
        Roadmap to HTC Workload Submission via OSG Connect 
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../htc_workload_planning_testing_scaling_up/jobdurationcategory/" class="md-nav__link">
        Indicate the Duration Category of Your Jobs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../htc_workload_planning_testing_scaling_up/preparing-to-scale-up/" class="md-nav__link">
        Determining the Amount of Resources to Request in a Submit File 
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_2" type="checkbox" id="__nav_4_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4_2">
          Submitting HTC Workloads With HTCondor
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Submitting HTC Workloads With HTCondor" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_2">
          <span class="md-nav__icon md-icon"></span>
          Submitting HTC Workloads With HTCondor
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../submitting_htc_workloads_with_htcondor/tutorial-quickstart/" class="md-nav__link">
        Quickstart-Submit Example HTCondor Jobs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../submitting_htc_workloads_with_htcondor/submit-multiple-jobs/" class="md-nav__link">
        Easily Submit Multiple Jobs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../submitting_htc_workloads_with_htcondor/tutorial-organizing/" class="md-nav__link">
        Organizing and Submitting HTC Workloads
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../submitting_htc_workloads_with_htcondor/tutorial-osg-locations/" class="md-nav__link">
        Finding OSG Locations
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../submitting_htc_workloads_with_htcondor/tutorial-error101/" class="md-nav__link">
        Troubleshooting Job Errors
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../submitting_htc_workloads_with_htcondor/tutorial-command/" class="md-nav__link">
        Use OSG Connect Tutorials
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../submitting_htc_workloads_with_htcondor/checkpointing-on-OSPool/" class="md-nav__link">
        Checkpointing Jobs
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_3" type="checkbox" id="__nav_4_3" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_4_3">
          Using Software On The OSG
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Using Software On The OSG" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_3">
          <span class="md-nav__icon md-icon"></span>
          Using Software On The OSG
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../software-overview/" class="md-nav__link">
        Using Software on the Open Science Pool
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../requirements/" class="md-nav__link">
        Control Where Your Jobs Run/Job Requirements
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../compiling-applications/" class="md-nav__link">
        Compiling Software for OSG Connect
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Example Software Compilation
      </a>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../available-containers-list/" class="md-nav__link">
        View Existing OSPool-Supported Containers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../containers-docker/" class="md-nav__link">
        Create/Register a Docker Container Image
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../new_modules_list/" class="md-nav__link">
        Access Software using Distributed Environment Modules
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../software-request/" class="md-nav__link">
        Request Help with Your Software
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../containers-singularity/" class="md-nav__link">
        Create a Singularity Container Image
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../containers/" class="md-nav__link">
        Use Containers on the OSG
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_4" type="checkbox" id="__nav_4_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4_4">
          Managing Data For Jobs
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Managing Data For Jobs" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_4">
          <span class="md-nav__icon md-icon"></span>
          Managing Data For Jobs
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../managing_data_for_jobs/osgconnect-storage/" class="md-nav__link">
        Overview: Data Staging and Transfer to Jobs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../managing_data_for_jobs/scp/" class="md-nav__link">
        Use scp To Transfer Files To and From OSG Connect
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../managing_data_for_jobs/file-transfer-via-htcondor/" class="md-nav__link">
        Transfer Input Files Up To 100MB In Size
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../managing_data_for_jobs/output-file-transfer-via-htcondor/" class="md-nav__link">
        Transfer Job Output Files Up To 1GB In Size
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../managing_data_for_jobs/stashcache/" class="md-nav__link">
        Transfer Larger Input and Output Files
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../managing_data_for_jobs/file-transfer-via-http/" class="md-nav__link">
        Transfer HTTP-available Files up to 1GB In Size
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_5" type="checkbox" id="__nav_4_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4_5">
          Considerations For Specific Resource Needs
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Considerations For Specific Resource Needs" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_5">
          <span class="md-nav__icon md-icon"></span>
          Considerations For Specific Resource Needs
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../considerations_for_specific_resource_needs/gpu-jobs/" class="md-nav__link">
        Using GPUs on the OSPool
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../considerations_for_specific_resource_needs/large-memory-jobs/" class="md-nav__link">
        Large Memory Jobs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../considerations_for_specific_resource_needs/multicore-jobs/" class="md-nav__link">
        Multicore Jobs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../considerations_for_specific_resource_needs/openmpi-jobs/" class="md-nav__link">
        OpenMPI Jobs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../considerations_for_specific_resource_needs/osg-xsede/" class="md-nav__link">
        Running OSG jobs on XSEDE
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_6" type="checkbox" id="__nav_4_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4_6">
          Automated Workflows
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Automated Workflows" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_6">
          <span class="md-nav__icon md-icon"></span>
          Automated Workflows
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../automated_workflows/dagman-workflows/" class="md-nav__link">
        Submit Workflows with HTCondor's DAGMan 
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../automated_workflows/tutorial-pegasus/" class="md-nav__link">
        Use Pegasus to Manage Workflows on OSG Connect
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          Software Examples For OSG
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Software Examples For OSG" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Software Examples For OSG
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_1" type="checkbox" id="__nav_5_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5_1">
          Python
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Python" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_1">
          <span class="md-nav__icon md-icon"></span>
          Python
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../software_examples_for_osg/python/manage-python-packages/" class="md-nav__link">
        Run Python Scripts on the OSPool 
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../software_examples_for_osg/python/tutorial-ScalingUp-Python/" class="md-nav__link">
        Scaling Up With HTCondorâ€™s Queue Command
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../software_examples_for_osg/python/tutorial-wordfreq/" class="md-nav__link">
        Wordcount Tutorial for Submitting Multiple Jobs
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_2" type="checkbox" id="__nav_5_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5_2">
          R
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="R" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_2">
          <span class="md-nav__icon md-icon"></span>
          R
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../software_examples_for_osg/r/tutorial-R-addlibSNA/" class="md-nav__link">
        Use External Packages in your R Jobs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../software_examples_for_osg/r/tutorial-R/" class="md-nav__link">
        Run R scripts on the OSPool
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../software_examples_for_osg/r/tutorial-ScalingUp-R/" class="md-nav__link">
        Scaling up compute resources
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_3" type="checkbox" id="__nav_5_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5_3">
          Bioinformatics
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Bioinformatics" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_3">
          <span class="md-nav__icon md-icon"></span>
          Bioinformatics
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../software_examples_for_osg/bioinformatics/tutorial-blast-split/" class="md-nav__link">
        High-Throughput BLAST
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../software_examples_for_osg/bioinformatics/tutorial-bwa/" class="md-nav__link">
        High-Throughput BWA Read Mapping
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_4" type="checkbox" id="__nav_5_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5_4">
          Drug Discovery
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Drug Discovery" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_4">
          <span class="md-nav__icon md-icon"></span>
          Drug Discovery
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../software_examples_for_osg/drug_discovery/tutorial-AutoDockVina/" class="md-nav__link">
        Running a Molecule Docking Job with AutoDock Vina
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_5" type="checkbox" id="__nav_5_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5_5">
          Matlab Runtime
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Matlab Runtime" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_5">
          <span class="md-nav__icon md-icon"></span>
          Matlab Runtime
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../software_examples_for_osg/matlab_runtime/tutorial-matlab-HelloWorld/" class="md-nav__link">
        Basics of compiled MATLAB applications - Hello World example
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_6" type="checkbox" id="__nav_5_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5_6">
          Other Languages and Tools
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Other Languages and Tools" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_6">
          <span class="md-nav__icon md-icon"></span>
          Other Languages and Tools
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../software_examples_for_osg/other_languages_tools/julia-on-osg/" class="md-nav__link">
        Using Julia on the OSPool 
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../software_examples_for_osg/other_languages_tools/conda-on-osg/" class="md-nav__link">
        Using conda to Run Python on the OSPool 
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../software_examples_for_osg/other_languages_tools/java-on-osg/" class="md-nav__link">
        Using Java in Jobs 
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_7" type="checkbox" id="__nav_5_7" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5_7">
          Machine Learning
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Machine Learning" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_7">
          <span class="md-nav__icon md-icon"></span>
          Machine Learning
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../software_examples_for_osg/machine_learning/tutorial-tensorflow-containers/" class="md-nav__link">
        Working with Tensorflow, GPUs, and containers
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_8" type="checkbox" id="__nav_5_8" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5_8">
          Freesurfer
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Freesurfer" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_8">
          <span class="md-nav__icon md-icon"></span>
          Freesurfer
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../software_examples_for_osg/freesurfer/Introduction/" class="md-nav__link">
        Introduction to FreeSurfer on the OSPool 
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                


<h1 id="example-software-compilation">Example Software Compilation<a class="headerlink" href="#example-software-compilation" title="Permanent link">&para;</a></h1>
<h1 id="example-of-compilng-software-for-use-in-osg-connect">Example of Compilng Software For Use In OSG Connect<a class="headerlink" href="#example-of-compilng-software-for-use-in-osg-connect" title="Permanent link">&para;</a></h1>
<h2 id="introduction">Introduction<a class="headerlink" href="#introduction" title="Permanent link">&para;</a></h2>
<p>Due to the distributed nature of the Open Science Pool, you will always need to 
ensure that your jobs have access to the software that will be executed. This guide provides 
a detailed example of compiling software for use in OSG Connect. </p>
<p>For this example, we will be compiling Samtools which is a very common bioinformatics 
software for working with aligned sequencing data. However, the steps described in this 
example are applicable to many other software. For a general introduction to software 
compilation in OSG Connect, please see <a href="../../../managing_htc_workloads_on_osg_connect/using_software_on_the_osg/compiling-applications/">Compiling Software for OSG Connect</a>.</p>
<p>Specifically, this guide provides two examples of compiling Samtools, <a href="#compile-samtools-without-cram-support">one without CRAM file 
support</a> and <a href="#compile-samtools-with-cram-support">one with CRAM file support</a>. 
<em>Why two examples?</em> Currently, to install Samtools 
with CRAM support requires additional dependencies (aka libraries) that will also need to be 
installed and most Samtools users are only working with BAM files which does not require CRAM 
support.</p>
<p><em>Do I need CRAM support for my work?</em> CRAM is an alternative compressed sequence alignment 
file format to BAM. Learn more at <a href="https://www.sanger.ac.uk/tool/cram/">https://www.sanger.ac.uk/tool/cram/</a>.</p>
<h2 id="compile-samtools-without-cram-support">Compile Samtools Without CRAM Support<a class="headerlink" href="#compile-samtools-without-cram-support" title="Permanent link">&para;</a></h2>
<h3 id="step-1-acquire-samtools-source-code">Step 1. Acquire Samtools source code<a class="headerlink" href="#step-1-acquire-samtools-source-code" title="Permanent link">&para;</a></h3>
<p>Samtools source code is available at <a href="http://www.htslib.org/download/">http://www.htslib.org/download/</a>. The 
development code is also available via GitHub at <a href="https://github.com/samtools/samtools">https://github.com/samtools/samtools</a>. On the download page is some important information to make note of:</p>
<blockquote>
<p>"[Samtools] uses HTSlib internally [and] these source packages contain their own copies of htslib"</p>
</blockquote>
<p>What this means is 1.) HTSlib is a dependency of Samtools and 2.) the HTSlib source code is included 
with the Samtools source code.</p>
<p>Either download the Samtools source code to your computer and upload to your login node, or
right-click on the Samtools source code link and copy the link location. Login in to your OSG Connect login node<br />
and use <code>wget</code> to download the source code directly and extract the tarball:</p>
<div class="codehilite"><pre><span></span><code>[user@login ~]$ wget https://github.com/samtools/samtools/releases/download/1.10/samtools-1.10.tar.bz2
[user@login ~]$ tar -xjf samtools-1.10.tar.bz2
</code></pre></div>

<p>The above two commands will create a directory named <code>samtools-1.10</code> which contains all the code 
and instructions needed for compiling Samtools and HTSlib. Take a moment to look at the content available 
in this new directory.</p>
<h3 id="step-2-read-through-installation-instructions">Step 2. Read through installation instructions<a class="headerlink" href="#step-2-read-through-installation-instructions" title="Permanent link">&para;</a></h3>
<p><em>What steps need to be performed for our compilation? What system dependencies exist for our 
software?</em> Answers to these questions, and other important information, should be available 
in the installation instructions for your software which will be available online and/or 
included in the source code.</p>
<p>The HTSlib website where the Samtools source code is hosted provides basic installation instructions 
and refers users to <code>INSTALL</code> (which is a plain text file that can be found in <code>samtools-1.10/</code>) for 
more information. You will also see a <code>README</code> file in the source code directory which will provide 
important information. <code>README</code> files will always be included with your source code and we 
recommend reviewing before compiling software. There is also a <code>README</code> and <code>INSTALL</code> file available 
for HTSlib in the source code directory <code>samtools-1.10/htslib-1.10/</code>.</p>
<p><code>cd</code> to samtools-1.10 and read through <code>README</code> and <code>INSTALL</code>. As described in <code>INSTALL</code>, 
the Samtools installation will follow the common <code>configure</code>, <code>make</code>, <code>make install</code> process:</p>
<div class="codehilite"><pre><span></span><code>Basic Installation
==================

To build and install Samtools, &#39;cd&#39; to the samtools-1.x directory containing
the package&#39;s source and type the following commands:

    ./configure
    make
    make install

The &#39;./configure&#39; command checks your build environment and allows various
optional functionality to be enabled (see Configuration below).
</code></pre></div>

<p>Also described in <code>INSTALL</code> are a number of required and optional system dependencies 
for installing Samtools and HTSlib (which is itself a dependency of Samtools):</p>
<div class="codehilite"><pre><span></span><code>System Requirements
===================

Samtools and HTSlib depend on the following libraries:

  Samtools:
    zlib       &lt;http://zlib.net&gt;
    curses or GNU ncurses (optional, for the &#39;tview&#39; command)
               &lt;http://www.gnu.org/software/ncurses/&gt;

  HTSlib:
    zlib       &lt;http://zlib.net&gt;
    libbz2     &lt;http://bzip.org/&gt;
    liblzma    &lt;http://tukaani.org/xz/&gt;
    libcurl    &lt;https://curl.haxx.se/&gt;
               (optional but strongly recommended, for network access)
    libcrypto  &lt;https://www.openssl.org/&gt;
               (optional, for Amazon S3 support; not needed on MacOS)

...

The bzip2 and liblzma dependencies can be removed if full CRAM support
is not needed - see HTSlib&#39;s INSTALL file for details.
</code></pre></div>

<p>Some dependencies are needed to support certain features from Samtools (such as <code>tview</code> and 
CRAM compression). You will not need <code>tview</code> as this is intended for interactive work which is 
not currently supported in OSG Connect. For this specific compilation example, we will disable 
both <code>tview</code> and CRAM support - see <a href="#compile-samtools-with-cram-support">below</a> for our 
compilation example that will provide CRAM file support. </p>
<p>Following the suggestion in the Samtools <code>INSTALL</code> file, we can view the HTSlib <code>INSTALL</code> 
file at <code>samtools-1.10/htslib-1.10/INSTALL</code>. Here we will find the necessary 
information for disabling bzip2 and liblzma dependencies:</p>
<div class="codehilite"><pre><span></span><code>--disable-bz2
    Bzip2 is an optional compression codec format for CRAM, included
    in HTSlib by default.  It can be disabled with --disable-bz2, but
    be aware that not all CRAM files may be possible to decode.

--disable-lzma
    LZMA is an optional compression codec for CRAM, included in HTSlib
    by default.  It can be disabled with --disable-lzma, but be aware
    that not all CRAM files may be possible to decode.
</code></pre></div>

<p>These are two flags that will need to be used when performing our installation.</p>
<p>To determine what libraries are available on our OSG Connect login node, we can look at <code>/usr/lib</code> 
and <code>/usr/lib64</code> for the various Samtools library dependencies, for example:</p>
<div class="codehilite"><pre><span></span><code>[user@login ~]$ ls /usr/lib* | grep libcurl
[user@login ~]$ ls /usr/lib* | grep htslib
</code></pre></div>

<p>Although we will find matches for <code>libcurl</code>, we will not find any <code>htslib</code> files meaning that 
HTSlib is not currently installed on the login node, nor is it currently available 
as a module. This means that HTSlib will also need to be compiled. Luckly, the Samtools 
developers have conveniently included the HTSlib source code with the Samtools source code 
and have made it possible to compile both Samtools and HTSlib at the same time. From the 
Samtools <code>INSTALL</code> file, is the following: </p>
<div class="codehilite"><pre><span></span><code>    By default, configure looks for an HTSlib source tree within or alongside
    the samtools source directory; if there are several likely candidates,
    you will have to choose one via this option.
</code></pre></div>

<p>This mean that we don't have to do anything extra to get HTSlib installed because 
the Samtools installation will do it by default.</p>
<blockquote>
<p>When performing your compilation, if your compiler is unable to locate the necessary 
libraries, or if newer versions of libraries are needed, it will result in an error - this 
makes for an alternative method of determining whether your system has the appropriate 
libraries for your software and more often than not, installation by trial and error is 
a common approach. However, taking a little bit of time before hand 
and looking for library files can save you time and frustration during software compilation.</p>
</blockquote>
<h3 id="step-3-perform-samtools-compilation">Step 3. Perform Samtools compilation<a class="headerlink" href="#step-3-perform-samtools-compilation" title="Permanent link">&para;</a></h3>
<p>We now have all of the information needed to start our compilation of Samtools without CRAM support.</p>
<p>First, we will create a new directory in our <code>home</code> directory that will store the 
Samtools compiled software. The example here will use a directory, called <code>my-software</code>, 
for organizing all compiled software in the <code>home</code> directory:</p>
<div class="codehilite"><pre><span></span><code>[user@login ~]$ mkdir $HOME/my-software
[user@login ~]$ mkdir $HOME/my-software/samtools-1.10
</code></pre></div>

<blockquote>
<p>As a best practice, always include the version name of your software in the directory name.</p>
</blockquote>
<p>Next we'll change to the Samtools source code direcory that was created in 
<a href="#step-1-acquire-samtools-source-code">Step 1</a>. You should see the <code>INSTALL</code> and <code>README</code> files 
as well as a file called <code>configure</code>.</p>
<p>The first command we will run is <code>./configure</code> - this step will execute the configure script 
and allows us to modify various details about our Samtools installation. We will be executing <code>configure</code> 
with several flags:</p>
<div class="codehilite"><pre><span></span><code>[user@login samtools-1.10]$ ./configure --prefix=$HOME/my-software/samtools-1.10 --disable-bz2 --disable-lzma --without-curses
</code></pre></div>

<p>Here we used <code>--prefix</code> to specify where we would like the final Samtools software 
to be installed, <code>--disable-bz2</code> and <code>--disable-lzma</code> to disable <code>lzma</code> 
and <code>bzip2</code> dependencies for CRAM, and <code>--without-curses</code> to disable <code>tview</code> support.</p>
<p>Next run the final two commands:</p>
<div class="codehilite"><pre><span></span><code>[user@login samtools-1.10]$ make
[user@login samtools-1.10]$ make install
</code></pre></div>

<p>Once <code>make install</code> has finished running, the compilation is complete. We can 
also confirm this by looking at the content of <code>~/my-software/samtools-1.10/</code> where 
we had Samtools installed:</p>
<div class="codehilite"><pre><span></span><code>[user@login samtools-1.10]$ cd ~
[user@login ~]$ ls -F my-software/samtools-1.10/
bin/ share/
</code></pre></div>

<p>There will be two directories present in <code>my-software/samtools-1.10</code>, one named <code>bin</code> and 
another named <code>share</code>. The Samtools executable will be located in <code>bin</code> and we can give 
it a quick test to make sure it runs as expected:</p>
<div class="codehilite"><pre><span></span><code>[user@login ~]$ ./my-software/samtools-1.10/bin/samtools view
</code></pre></div>

<p>which will return the Samtools <code>view</code> usage statement.</p>
<h3 id="step-4-make-our-software-portable">Step 4. Make our software portable<a class="headerlink" href="#step-4-make-our-software-portable" title="Permanent link">&para;</a></h3>
<p>Our subsequent job submissions on OSG Connect will need a copy of our software. For 
convenience, we recommend converting your software directory to a tar archive. 
First move to <code>my-software/</code>, then create the tar archive:</p>
<div class="codehilite"><pre><span></span><code>[user@login ~]$ mv my-software/
[user@login my-software]$ tar -czf samtools-1.10.tar.gz samtools-1.10/
[user@login my-software]$ ls samtools-1.10*
samtools-1.10/ samtools-1.10.tar.gz
[user@login my-software]$ du -h samtools-1.10.tar.gz
2.0M    samtools-1.10.tar.gz
</code></pre></div>

<p>The last command in the above example returns the size of our tar archive. This is 
important for determine the appropriate method that we should use for transferring 
this file along with our subsequent jobs. To learn more, please see 
<a href="../../../managing_htc_workloads_on_osg_connect/managing_data_for_jobs/osgconnect-storage/">Introduction to Data Management on OSG Connect</a>.</p>
<p>To clean up and clear out space in your home directory, we recommend deleting the Samtools source 
code directory.</p>
<h3 id="step-5-use-samtools-in-our-jobs">Step 5. Use Samtools in our jobs<a class="headerlink" href="#step-5-use-samtools-in-our-jobs" title="Permanent link">&para;</a></h3>
<p>Now that Samtools has been compiled we can submit jobs that use this software. Below is an example submit file 
for a job that will use Samtools with a BAM file named <code>my-sample.bam</code> which is &lt;100MB in size:</p>
<div class="codehilite"><pre><span></span><code>#samtools.sub
log = samtools.$(Cluster).log
error = samtools.$(Cluster)_$(Process).err
output = samtools.$(Cluster)_$(Process).out

executable = samtools.sh

transfer_input_files = /home/username/my-software/samtools-1.10.tar.gz, my-sample.bam

should_transfer_files = YES
when_to_transfer_output = ON_EXIT

requirements = (OSGVO_OS_STRING == &quot;RHEL 7&quot;)
request_memory = 1.3GB
request_disk = 1.5GB
request_cpus = 1

queue 1
</code></pre></div>

<p>The above submit file will transfer a complete copy of the Samtools tar archive 
created in <a href="#step-4-make-our-software-portable">Step 4</a> and also includes an important 
<code>requirements</code> attribute which tells HTCondor to run our job on 
execute nodes running Red Hat Linux version 7 operating system.</p>
<blockquote>
<p>The resource requests for your jobs may differ from what is shown in the 
above example. Always run tests to determine the appropriate requests for your jobs.</p>
</blockquote>
<p>Some additional steps are then needed in the executable bash script used by this job 
to "untar" the Samtools and add this software to the <code>PATH</code> enviroment variable:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span></pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="ch">#!/bin/bash</span>
<span class="c1"># samtools.sh</span>

<span class="c1"># untar software</span>
tar -xzf samtools-1.10.tar.gz

<span class="c1"># modify environment variables </span>
<span class="nb">export</span> <span class="nv">PATH</span><span class="o">=</span><span class="nv">$_CONDOR_SCRATCH_DIR</span>/samtools-1.10/bin:<span class="nv">$PATH</span>

<span class="c1"># run samtools commands</span>
...
</code></pre></div>
</td></tr></table>
<h2 id="compile-samtools-with-cram-support">Compile Samtools With CRAM Support<a class="headerlink" href="#compile-samtools-with-cram-support" title="Permanent link">&para;</a></h2>
<p>This example includes steps to install and use a library and to use a module, 
which are both currently needed for compiling Samtools with CRAM support. </p>
<p>The steps in this example assume that you have performed 
<a href="#step-1-acquire-samtools-source-code">Step 1</a> and 
<a href="#step-2-read-through-installation-instructions">Step 2</a> in the above example for 
compiling Samtools without CRAM support.</p>
<h3 id="step-2-read-through-installation-instructions-continued">Step 2. Read through installation instructions, continued<a class="headerlink" href="#step-2-read-through-installation-instructions-continued" title="Permanent link">&para;</a></h3>
<p>From both the Samtools and HTSlib <code>INSTALL</code> files, we know that both bzip2 and 
libzlma are required for CRAM support. We can check our system for these libraries:</p>
<div class="codehilite"><pre><span></span><code>[user@login ~]$ ls /usr/lib* | grep libz
[user@login ~]$ ls /usr/lib* | grep libbz2
</code></pre></div>

<p>which will reveal that both sets of libraries are available on the login. <strong>However</strong> 
if we were to attempt Samtools installation with CRAM support right now 
we would find that this results in an error when performing the <code>configure</code> step.</p>
<p><em>If the libraries are present, why do we get this error?</em> This error is due to 
differences between types of library files. For example, running 
<code>ls /usr/lib* | grep libbz2</code> will return two matches, <code>libbz2.so.1</code> and <code>libbz2.so.1.0.6</code>. 
But running <code>ls /usr/lib* | grep liblz</code> will return four matches including three 
<code>.so</code> and one <code>.a</code> files. Our Samtools compilation specifically requires 
the <code>.a</code> type of library file for both <code>libbz2</code> and <code>liblzma</code> and the absence of 
this type of library file in <code>/usr/lib64</code> is why compilation 
will fail without additional steps.</p>
<p>Luckily for us, bzip2 version 1.0.6 is available as a module and this module 
includes access to a <code>.a</code> library file. We will use this module for our Samtools compilation. 
To learn more about using modules, please see 
<a href="../../../managing_htc_workloads_on_osg_connect/using_software_on_the_osg/software-request/">Accessing Software using Distributed Environment Modules</a>. 
<code>liblzma</code> however is not currently available as a module and our next step 
will be to install <code>liblzma</code>.</p>
<h3 id="step-3-compile-liblzma">Step 3. Compile liblzma<a class="headerlink" href="#step-3-compile-liblzma" title="Permanent link">&para;</a></h3>
<p>To compile Samtools with CRAM support requires that we first compile 
<code>liblzma</code>. Following the same approach as we did for Samtools, first we 
acquire a copy of the the latest liblzma source code, then review the installation instructions. 
From our online search we will that <code>liblzma</code> 
is availble from the XZ Utils library package.</p>
<div class="codehilite"><pre><span></span><code>[user@login ~]$ wget https://tukaani.org/xz/xz-5.2.5.tar.gz
[user@login ~]$ tar -xzf xz-5.2.5.tar.gz
</code></pre></div>

<p>Then review the installation instructions and check for dependencies. Everything 
that is needed for the default installation of XZ utils is currently available on the login node.</p>
<div class="codehilite"><pre><span></span><code>[user@login ~]$ cd xz-5.2.5/
[user@login xz-5.2.5]$ less INSTALL
</code></pre></div>

<p>Perform the XZ Utils compilation:</p>
<div class="codehilite"><pre><span></span><code>[user@login xz-5.2.5]$ mkdir $HOME/my-software/xz-5.2.5
[user@login xz-5.2.5]$ ./configure --prefix=$HOME/my-software/xz-5.2.5
[user@login xz-5.2.5]$ make
[user@login xz-5.2.5]$ make install
[user@login xz-5.2.5]$ ls -F $HOME/my-software/xz-5.2.5
/bin  /include  /lib  /share
</code></pre></div>

<p>Success!</p>
<p>Lastly we need to set some environment variables so that Samtools knows where to 
find this library:</p>
<div class="codehilite"><pre><span></span><code>[user@login xz-5.2.5]$ export PATH=$HOME/my-software/xz-5.2.5/bin:$PATH
[user@login xz-5.2.5]$ export LIBRARY_PATH=$HOME/my-software/xz-5.2.5/lib:$LIBRARY_PATH
[user@login xz-5.2.5]$ export LD_LIBRARY_PATH=$LIBRARY_PATH
</code></pre></div>

<h3 id="step-4-load-bzip2-module">Step 4. Load bzip2 module<a class="headerlink" href="#step-4-load-bzip2-module" title="Permanent link">&para;</a></h3>
<p>After installing XZ Utils and setting our environment variable, next we will 
load the bzip2 module:</p>
<div class="codehilite"><pre><span></span><code>[user@login xz-5.2.5]$ module load bzip2/1.0.6
</code></pre></div>

<p>Loading this module will further modify some of your environment variables 
so that Samtools is able to locate the bzip2 library files.</p>
<p>To learn more about using modules, please see 
<a href="../../../managing_htc_workloads_on_osg_connect/using_software_on_the_osg/software-request/">Accessing Software using Distributed Environment Modules</a>. </p>
<h3 id="step-5-compile-samtools">Step 5. Compile Samtools<a class="headerlink" href="#step-5-compile-samtools" title="Permanent link">&para;</a></h3>
<p>After compiling XZ Utils (which provides <code>liblzma</code>) and loading the <code>bzip2 1.0.6</code> module, 
we are now ready to compile Samtools with CRAM support.</p>
<p>First, we will create a new directory in our <code>home</code> directory that will store the 
Samtools compiled software. The example here will use a common directory, called <code>my-software</code>, 
for organizing all compiled software in the <code>home</code> directory:</p>
<div class="codehilite"><pre><span></span><code>[user@login ~]$ mkdir $HOME/my-software
[user@login ~]$ mkdir $HOME/my-software/samtools-1.10
</code></pre></div>

<blockquote>
<p>As a best practice, always include the version name of your software in the directory name.</p>
</blockquote>
<p>Next, we will change our directory to the Samtools source code direcory that was created in 
<a href="#step-1-acquire-samtools-source-code">Step 1</a>. You should see the <code>INSTALL</code> and <code>README</code> files 
as well as a file called <code>configure</code>.</p>
<p>The first command we will run is <code>./configure</code> - this file is a script that allows us 
to modify various details about our Samtools installation and we will be executing <code>configure</code> 
with a flag that disables <code>tview</code>:</p>
<div class="codehilite"><pre><span></span><code>[user@login samtools-1.10]$ ./configure --prefix=$HOME/my-software/samtools-1.10 --without-curses
</code></pre></div>

<p>Here we used <code>--prefix</code> to specify where we would like the final Samtools software 
to be installed and <code>--without-curses</code> to disable <code>tview</code> support.</p>
<p>Next run the final two commands:</p>
<div class="codehilite"><pre><span></span><code>[user@login samtools-1.10]$ make
[user@login samtools-1.10]$ make install
</code></pre></div>

<p>Once <code>make install</code> has finished running, the compilation is complete. We can 
also confirm this by looking at the content of <code>~/my-software/samtools-1.10/</code> where 
we had Samtools installed:</p>
<div class="codehilite"><pre><span></span><code>[user@login samtools-1.10]$ cd ~
[user@login ~]$ ls -F my-software/samtools-1.10/
bin/ share/
</code></pre></div>

<p>There will be two directories present in <code>my-software/samtools-1.10</code>, one named <code>bin</code> and 
another named <code>share</code>. The Samtools executable will be located in <code>bin</code> and we can give 
it a quick test to make sure it runs as expected:</p>
<div class="codehilite"><pre><span></span><code>[user@login ~]$ ./my-software/samtools-1.10/bin/samtools view
</code></pre></div>

<p>which will return the Samtools <code>view</code> usage statement.</p>
<h3 id="step-6-make-our-software-portable">Step 6. Make our software portable<a class="headerlink" href="#step-6-make-our-software-portable" title="Permanent link">&para;</a></h3>
<p>Our subsequent job submissions on OSG Connect will need a copy of our software. For 
convenience, we recommend converting your software directory to a tar archive. 
First move to <code>my-software/</code>, then create the tar archive:</p>
<div class="codehilite"><pre><span></span><code>[user@login ~]$ cd my-software/
[user@login my-software]$ tar -czf samtools-1.10.tar.gz samtools-1.10/
[user@login my-software]$ ls samtools-1.10*
samtools-1.10/ samtools-1.10.tar.gz
[user@login my-software]$ du -h samtools-1.10.tar.gz
2.0M    samtools-1.10.tar.gz
</code></pre></div>

<p>The last command in the above example returns the size of our tar archive. This is 
important for determine the appropriate method that we should use for transferring 
this file along with our subsequent jobs. To learn more, please see 
<a href="../../../managing_htc_workloads_on_osg_connect/managing_data_for_jobs/osgconnect-storage/">Introduction to Data Management on OSG Connect</a>.</p>
<p>Follow the these same steps for creating a tar archive of the xz-5.2.5 library as well. </p>
<p>To clean up and clear out space in your home directory, we recommend deleting the Samtools source 
code directory.</p>
<h3 id="step-7-use-samtools-in-our-jobs">Step 7. Use Samtools in our jobs<a class="headerlink" href="#step-7-use-samtools-in-our-jobs" title="Permanent link">&para;</a></h3>
<p>Now that Samtools has been compiled we can submit jobs that use this software. For Samtools 
with CRAM we will also need to bring along a copy of XZ Utils (which includes the <code>liblzma</code> library) 
and ensure that our jobs have access to the <code>bzip2 1.0.6</code> module. Below is an example submit file 
for a job that will use Samtools with a Fasta file <code>genome.fa' and CRAM file named</code>my-sample.cram` which is &lt;100MB in size:</p>
<div class="codehilite"><pre><span></span><code>#samtools-cram.sub
log = samtools-cram.$(Cluster).log
error = samtools-cram.$(Cluster)_$(Process).err
output = samtools-cram.$(Cluster)_$(Process).out

executable = samtools-cram.sh

transfer_input_files = /home/username/my-software/samtools-1.10.tar.gz, /home/username/my-software/xz-5.2.5.tar.gz, genome.fa, my-sample.cram

should_transfer_files = YES
when_to_transfer_output = ON_EXIT

requirements = (OSGVO_OS_STRING == &quot;RHEL 7&quot;) &amp;&amp; (HAS_MODULES =?= TRUE)
request_memory = 1.3GB
request_disk = 1.5GB
request_cpus = 1

queue 1
</code></pre></div>

<p>The above submit file will transfer a complete copy of the Samtools tar archive 
created in <a href="#step-6-make-our-software-portable">Step 6</a> as well as a copy of XZ Utils installation from 
<a href="#step-3-compile-liblzma">Step 3</a>. This submit file 
also includes two important <code>requirements</code> which tell HTCondor to run our job on 
execute nodes running Red Hat Linux version 7 operating system and which has 
access to OSG Connect software modules.</p>
<blockquote>
<p>The resource requests for your jobs may differ from what is shown in the 
above example. Always run tests to determine the appropriate requests for your jobs.</p>
</blockquote>
<p>Some additional steps are then needed in the executable bash script used by this job 
to "untar" the Samtools and XZ Util tar archives, modify the <code>PATH</code> and 
<code>LD_LIBRARY_PATH</code> enviroments of our job, and load the <code>bzip2</code> module:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span></pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="ch">#!/bin/bash</span>
<span class="c1"># samtools-cram.sh</span>

<span class="c1"># untar software and libraries</span>
tar -xzf samtools-1.10.tar.gz
tar -xzf xz-5.2.5.tar.gz

<span class="c1"># modify environment variables </span>
<span class="nb">export</span> <span class="nv">LD_LIBRARY_PATH</span><span class="o">=</span><span class="nv">$_CONDOR_SCRATCH_DIR</span>/xz-5.2.5/lib:<span class="nv">$LD_LIBRARY_PATH</span>
<span class="nb">export</span> <span class="nv">PATH</span><span class="o">=</span><span class="nv">$_CONDOR_SCRATCH_DIR</span>/samtools-1.10/bin:<span class="nv">$_CONDOR_SCRATCH_DIR</span>/xz-5.2.5/bin:<span class="nv">$PATH</span>

<span class="c1"># load bzip2 module</span>
module load bzip2/1.0.6

<span class="c1"># run samtools commands</span>
...
</code></pre></div>
</td></tr></table>

              
            </article>
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../compiling-applications/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Compiling Software for OSG Connect" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Compiling Software for OSG Connect
            </div>
          </div>
        </a>
      
      
        
        <a href="../available-containers-list/" class="md-footer__link md-footer__link--next" aria-label="Next: View Existing OSPool-Supported Containers" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              View Existing OSPool-Supported Containers
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    <a href="https://twitter.com/OSGUserSchool" target="_blank" rel="noopener" title="OSG User School on Twitter" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
    </a>
  
    
    
    <a href="https://www.facebook.com/OSGUserSchool" target="_blank" rel="noopener" title="OSG User School on Facebook" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.tabs"], "search": "../../../assets/javascripts/workers/search.5e67fbfe.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.c44cc438.min.js"></script>
      
    
  </body>
</html>